# Хранение состояния

**Хранение состояния в оперативной памяти**
У этого подхода есть несколько минусов

1. Утеря данных при выключении устройства или перезапуске приложения. Данные будут храниться только на время текущей сессии
2. Ограниченность оперативной памяти. Оперативная память жестко ограничена и не предусмотрена для долгого хранения информации
3. Низкая надёжность. Любой сбой в работе приложения или системы приводит к потере информации.

**Хранение состояния в json**

1. Стало лучше:
   1. Данные сохраняются после выключения устройства.
   2. Разгрузили оперативную память.
   3. Простота использования. Формат JSON легко читается и редактируется как программой, так и человеком.

Избавились ли мы от хранения состояния?
Нет. Состояние приложения по-прежнему сохраняется, но теперь оно хранится не в оперативной памяти, а на диске. Это делает его устойчивым к перезапускам, но не устраняет само хранение состояния.

**Альтернативные способы хранения задач**

**Реляционные базы данных (PostgreSQL, MySQL)**

Преимущества:
1. Надёжность и целостность данных (ACID-свойства).
2. Возможность строить связи между таблицами.
3. Поддержка сложных запросов (JOIN, агрегации).

Недостатки:
1. Сложность настройки и администрирования.

**NoSQL базы данных (MongoDB, Redis)**
Преимущества:
1. Гибкость структуры данных.
2. Высокая производительность и масштабируемость.
   
Недостатки:
1. Отсутствие транзакций в некоторых случаях. Многие NoSQL базы данных не поддерживают ACID-транзакции, что может привести к проблемам с согласованностью данных. 
2. В некоторых NoSQL базах данных задача контроля целостности данных ложится на приложение, что может привести к непредсказуемым результатам. 

**Облачные хранилища (Amazon S3, Firebase)**

Преимущества:

1. Доступность из любой точки мира.
2. Автоматическое резервное копирование.
3. Легкое масштабирование.

Недостатки:

1. Потенциально высокая стоимость.
2. Зависимость от интернет-соединения.

**Локальные базы данных (SQLite)**

Преимущества:

1. Не требует установки сервера.
2. Простота интеграции.
3. Подходит для небольших приложений.

Недостатки:
1. Низкая производительность при высокой нагрузке.
2. Ограниченная поддержка многопользовательского доступа.

**После интеграции с облачным сервисом (jsonbin.io, mockapi.io или github gist) остаются следующие проблемы:**

Конфликты одновременного доступа: Если два пользователя одновременно изменяют одну задачу, одно из изменений может быть потеряно.

Возможные решения
Оптимистичная блокировка:
1. Добавить версионность (каждая запись имеет версию)
2. Перед обновлением проверять, что версия не изменилась
3. Если версия изменилась - запрашивать у пользователя разрешение на конфликт

Пессимистичная блокировка:
1. Блокировать запись на время редактирования
2. Недостаток: может снизить отзывчивость системы
